<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidDic</title>
</head>
<body>
    <h1>ホーム画面</h1>    
</body>
</html> -->


<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidDic - 名言辞典</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <header>
        <h1>KidDic</h1>
        <nav>
            <a href="{% url 'home' %}">ホーム</a>
            <a href="#">メニュー</a>
        </nav>
    </header>

    <!-- 検索フォーム -->
    <section class="search-section">
        <form method="get" action="{% url 'home' %}">
            <input type="text" name="keyword" placeholder="キーワード" value="{{ request.GET.keyword }}">
            <select name="month">
                <option value="">月</option>
                <!-- 月の選択肢を追加 -->
            </select>
            <select name="category">
                <option value="">カテゴリ</option>
                <!-- カテゴリの選択肢を追加 -->
            </select>
            <select name="speaker">
                <option value="">発言者</option>
                <!-- 発言者の選択肢を追加 -->
            </select>
            <button type="submit">検索</button>
            <select name="sort_order">
                <option value="newest">新着順</option>
                <option value="alphabet">五十音順</option>
                <option value="year">年代順</option>
            </select>
        </form>
    </section>

    <!-- 名言一覧 -->
    <section class="quote-list">
        <ul>
            {% for quote in quotes %}
            <li class="quote-item">
                <p>{{ quote.child.nickname }} {{ quote.created_at|date:"Y/m" }} - {{ quote.content }}</p>
                <div class="quote-details">
                    <img src="{{ quote.image_url }}" alt="quote image">
                    <p>コメント数: {{ quote.comment_set.count }}</p>
                    <a href="{% url 'quote_edit' quote.id %}">編集</a>
                </div>
            </li>
            {% empty %}
            <li>名言が登録されていません。</li>
            {% endfor %}
        </ul>
    </section>

    <!-- モーダルの構造 -->
    <div id="quoteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>名言を登録</h2>
            <form method="post" action="{% url 'quote_add' %}" enctype="multipart/form-data">
                {% csrf_token %}
            
                <!-- デバッグ用: childrenの内容を表示 -->
                <ul>
                    {% for child in children %}
                        <li>{{ child.nickname }}</li>  <!-- デバッグ：ニックネームを表示 -->
                    {% endfor %}
                </ul>

                <!-- 子どもを選択するプルダウンメニュー -->
                <label for="child">子どもを選択:</label>
                <select name="child" id="child" required>
                    {% for child in children %}
                        <option value="{{ child.id }}">{{ child.nickname }}</option>
                    {% endfor %}
                 </select>

                <!-- 名言 -->
                <label for="content">名言 <span style="color:red;">※必須</span></label>
                <input type="text" name="content" id="content" required>

                <!-- 日付 -->
                <label for="date">日付</label>
                <input type="date" name="date" id="date" value="{{ today_date }}">

                <!-- テキストエリア (任意の追加情報) -->
                <label for="description">説明</label>
                <textarea name="description" id="description"></textarea>

                <!-- カテゴリ選択 -->
                <label for="category">カテゴリ</label>
                <select name="category" id="category">
                    {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>

                <!-- 画像のアップロード -->
                <label for="image">写真</label>
                <input type="file" name="image" id="image">

                <button type="submit">登録</button>
            </form>
        </div>
    </div>

    <!-- 固定ボタンでモーダルを開く -->
    <button class="add-quote-btn" onclick="openModal()">➕</button>

    <script src="{% static 'js/modal.js' %}"></script>
</body>
</html>
